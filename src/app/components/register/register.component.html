<div class="form-container">
  <h2>Register</h2>
  <form [formGroup]="registerForm" (ngSubmit)="onSubmit()">
    <label>
      Username:
      <input formControlName="username" />
    </label>
    <div class="error" *ngIf="registerForm.get('username')?.invalid && registerForm.get('username')?.touched">
      Username is required and must be at least 3 characters.
    </div>

    <label>
      Email:
      <input formControlName="email" type="email" />
    </label>
    <div class="error" *ngIf="registerForm.get('email')?.invalid && registerForm.get('email')?.touched">
      Enter a valid email.
    </div>

    <label>
      Password:
      <input
    formControlName="password"
    [type]="showPassword ? 'text' : 'password'"
  />
    </label>
    <button type="button" (click)="togglePasswordVisibility()" class="toggle-pwd-btn">
      {{ showPassword ? 'Hide' : 'Show' }} 
    </button>
    
    <div class="error" *ngIf="registerForm.get('password')?.invalid && registerForm.get('password')?.touched">
      Password is required and :
      <li>must be at least 8 characters</li>
      <li>must contain lower-case characters</li>
      <li>must contain upper-case characters</li>
      <li>must contain at least one special character</li>
    </div>

    <!--<label> // Hid it for now :)
      Role:
      <select formControlName="role">
        <option value="normal">Normal</option>
        <option value="special">Special</option>
        <option value="moderator">Moderator</option>
      </select>
    </label>-->

    <!-- Enhanced Button with Classes -->
    <button type="submit" [disabled]="registerForm.invalid || isLoading" class="btn btn-register">
      Register
    </button>
  </form>
  <div *ngIf="message" class="message">{{ message }}</div>
  <p>Already have an account? <a routerLink="/login">Login here</a></p>

  <!-- Display Spinner when loading -->
  <app-spinner *ngIf="isLoading"></app-spinner>
</div>
